{% extends "layout.html" %}

{% block title %}UMS - All Users{% endblock %}

{% block content %}
<h1 class="display-5">All Users</h1>

<div class="table-responsive mt-5">
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Age</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for user in users %}
        <tr>
            <th scope="row">{{ user.id }}</th>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.age }}</td>
            <td>
                {% if user.is_active %}
                <span class="badge text-bg-success">Active</span>
                {% else %}
                <span class="badge text-bg-danger">Inactive</span>
                {% endif %}
            </td>
            <td>
                <div class="dropdown">
                    <button class="btn btn-warning dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                        Actions
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/users/{{user.id}}/edit">Edit User</a></li>
                        <li>
                            <form action="/users/{{user.id}}/toggle" method="post">
                                <input type="hidden" name="_method" value="PATCH"/>
                                <button type="submit" class="dropdown-item"
                                        style="border: none; background: none; width: 100%; text-align: left; cursor: pointer;">
                                    {% if user.is_active %}
                                    Deactivate
                                    {% else %}
                                    Activate
                                    {% endif %}
                                </button>
                            </form>
                        </li>
                        <li>
                            <form action="/users/{{ user.id }}/delete" method="POST" style="margin: 0;"
                                  onsubmit="return confirm('Are you sure you want to delete this user?');">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="submit" class="dropdown-item"
                                        style="border: none; background: none; width: 100%; text-align: left; cursor: pointer;">
                                    Delete User
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
        {% endfor %}

        </tbody>
    </table>
</div>

{% endblock %}